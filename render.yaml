services:
  - type: web
    name: game-backend
    rootDir: apps/backend
    env: node
    plan: free
    buildCommand: "npm install && npm run build"
    startCommand: "npm run start"
    envVars:
      - key: NODE_ENV
        value: production
      - key: FRONTEND_ORIGIN
        value: "*"
    healthCheckPath: /healthz
    autoDeploy: true

  - type: static_site            # ← 就係呢行，唔好寫 static
    name: game-frontend
    rootDir: apps/frontend
    buildCommand: "npm install && npm run build"
    staticPublishPath: dist      # Vite 預設輸出資料夾
    envVars:
      - key: VITE_API_BASE_URL
        value: "https://game-backend.onrender.com"  # 首次部署後改成實際後端 URL
    autoDeploy: true

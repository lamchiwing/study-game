services:
  - type: web
    name: game-backend
    rootDir: apps/backend
    env: node
    plan: free
    buildCommand: "npm install && npm run build"
    startCommand: "npm run start"
    envVars:
      - key: NODE_ENV
        value: production
      - key: FRONTEND_ORIGIN
        value: "*"
    healthCheckPath: /healthz
    autoDeploy: true

  - type: static_site
    name: game-frontend
    rootDir: apps/frontend
    buildCommand: "npm install && npm run build"
    staticPublishPath: dist
    envVars:
      - key: VITE_API_BASE_URL
        value: "https://game-backend.onrender.com"  # 先占位，首次部署後再改成實際後端 URL
    autoDeploy: true
